{% if messages %}
    {% for message in messages %}
        <div class="chat-message {% if message.sender == user_profile %}sent{% else %}received{% endif %} animate__animated animate__fadeIn animate__faster">
            <div class="message-content">
                {% if message.content %}
                    <div class="message-text">{{ message.content }}</div>
                {% endif %}
                
                {% if message.image %}
                    <div class="message-image mt-1">
                        <img src="{{ message.image.url }}" alt="Image" class="img-fluid rounded" style="max-height: 200px;">
                    </div>
                {% endif %}
                
                {% if message.file %}
                    <div class="message-file mt-1">
                        <a href="{{ message.file.url }}" download class="download-link">
                            <div class="file-download-button">
                                <i class="fas fa-file-download"></i>
                                <span>Download</span>
                            </div>
                        </a>
                    </div>
                {% endif %}
            </div>
            
            <div class="message-time">
                {{ message.timestamp|date:"h:i A" }}
            </div>
            
            <div class="message-actions">
                <button class="btn btn-sm text-muted" title="Reply">
                    <i class="fas fa-reply"></i>
                </button>
                <button class="btn btn-sm text-muted" title="React">
                    <i class="fas fa-smile"></i>
                </button>
            </div>
        </div>
    {% endfor %}
{% else %}
    <div class="text-center py-5 empty-messages-container animate__animated animate__fadeIn">
        <div class="empty-messages-icon">
            <i class="fas fa-comments mb-3" style="font-size: 3.5rem; opacity: 0.6;"></i>
        </div>
        <p class="empty-messages-text mb-0">No messages yet</p>
        <p class="text-muted small">Start the conversation!</p>
    </div>
{% endif %} 